<app-menu></app-menu>
<section id="diario" class="section-diary" aria-labelledby="diario-title">
  <div class="container">
    <div class="diary-main-layout">
      <!-- Insights Sidebar -->
      <aside
        class="insights-panel"
        aria-label="Painel de insights"
        tabindex="0"
      >
        <h3>Insights</h3>
        <div class="insight-box">
          <span>Emo√ß√£o mais frequente</span>
          <strong class="insight-main">{{ emocaoMaisFrequente }}</strong>
        </div>
        <div class="insight-box">
          <span>Energia</span>
          <strong class="insight-main">{{ nivelEnergia }}</strong>
        </div>
        <div class="insight-box">
          <span>N√≠vel de estresse</span>
          <strong class="insight-main">{{ nivelEstresse }}</strong>
        </div>
      </aside>

      <!-- Main Diary Content -->
      <section class="diary-content" aria-label="Conte√∫do principal do di√°rio">
        <h1 id="diario-title">Di√°rio Emocional</h1>
        <p class="subtitle">
          Registre como voc√™ est√° se sentindo e acompanhe seu bem-estar
          emocional
        </p>
        <form
          (ngSubmit)="onSubmit()"
          #diarioForm="ngForm"
          autocomplete="off"
          aria-label="Formul√°rio de registro emocional"
        >
          <div
            class="emotion-selector"
            role="radiogroup"
            aria-label="Sele√ß√£o de emo√ß√£o"
          >
            <div
              class="emotion-item"
              *ngFor="
                let emo of [
                  { nome: 'Feliz', emoji: 'üòä', valor: 'feliz' },
                  { nome: 'Neutro', emoji: 'üòê', valor: 'neutro' },
                  { nome: 'Triste', emoji: 'üò¢', valor: 'triste' },
                  { nome: 'Irritado', emoji: 'üò†', valor: 'irritado' },
                  { nome: 'Ansioso', emoji: 'üò∞', valor: 'ansioso' }
                ]
              "
            >
              <button
                type="button"
                class="emotion-btn"
                [ngClass]="{ selected: emocao === emo.valor }"
                (click)="emocao = emo.valor"
                [attr.aria-label]="emo.nome"
                [attr.aria-checked]="emocao === emo.valor"
                role="radio"
                tabindex="0"
              >
                <span aria-hidden="true">{{ emo.emoji }}</span>
              </button>
              <div class="emotion-label">{{ emo.nome }}</div>
            </div>
          </div>
          <label for="diario-descricao" class="sr-only"
            >Descri√ß√£o do sentimento</label
          >
          <textarea
            id="diario-descricao"
            class="diary-textarea"
            placeholder="Conte mais sobre como voc√™ est√° se sentindo..."
            [(ngModel)]="descricao"
            name="descricao"
            required
            aria-label="Descri√ß√£o do sentimento"
          ></textarea>
          <button
            class="register-btn"
            type="submit"
            [disabled]="!emocao || !descricao"
            [attr.aria-disabled]="!emocao || !descricao"
          >
            Registrar
          </button>
        </form>

        <div class="history-insights">
          <div class="history-panel" aria-label="Hist√≥rico de emo√ß√µes">
            <div class="history-header">
              <strong>Hist√≥rico de Emo√ß√µes</strong>
              <div
                class="history-toggle"
                role="tablist"
                aria-label="Alternar per√≠odo do hist√≥rico"
              >
                <button
                  [class.active]="filtroGrafico === 'semana'"
                  role="tab"
                  [attr.aria-selected]="filtroGrafico === 'semana'"
                  tabindex="0"
                  (click)="selecionarFiltroGrafico('semana')"
                >
                  Semana
                </button>
                <button
                  [class.active]="filtroGrafico === 'mes'"
                  role="tab"
                  [attr.aria-selected]="filtroGrafico === 'mes'"
                  tabindex="0"
                  (click)="selecionarFiltroGrafico('mes')"
                >
                  M√™s
                </button>
                <button
                  [class.active]="filtroGrafico === 'ano'"
                  role="tab"
                  [attr.aria-selected]="filtroGrafico === 'ano'"
                  tabindex="0"
                  (click)="selecionarFiltroGrafico('ano')"
                >
                  Ano
                </button>
              </div>
            </div>
            <div class="history-graph">
              <canvas
                baseChart
                [data]="barChartData"
                type="bar"
                [options]="barChartOptions"
                style="
                  max-width: 100%;
                  height: 300px;
                  display: block;
                  margin: 0 auto;
                "
                aria-label="Gr√°fico de Emo√ß√µes"
              ></canvas>
            </div>
          </div>
        </div>
        <div class="lareais-ansiedade">
          <h2>Exemplos reais para voc√™</h2>
          <ul class="lareais-list">
            <li *ngFor="let item of ansiedadeLareais">
              <div class="lareais-card">
                <div class="lareais-card-content">
                  <strong>{{ item.titulo }}</strong>
                  <div class="lareais-descricao">{{ item.descricao }}</div>
                  <div class="lareais-meta">
                    <span *ngIf="item.icone === 'video'">
                      <span class="icon-video"></span> V√≠deo
                    </span>
                    <span *ngIf="item.icone === 'audio'">
                      <span class="icon-audio"></span> √Åudio
                    </span>
                    <span *ngIf="item.icone === 'texto'">
                      <span class="icon-text"></span> Texto
                    </span>
                    <span *ngIf="item.duracao">
                      <span class="icon-clock"></span> {{ item.duracao }}
                    </span>
                    <span class="lareais-tag">{{ item.categoria }}</span>
                  </div>
                </div>
                <button
                  class="lareais-btn"
                  (click)="abrirDetalhe(item)"
                  [attr.aria-label]="'Abrir detalhe de ' + item.titulo"
                >
                  Acessar
                </button>
              </div>
            </li>
          </ul>
        </div>
        <app-detalhe-modal
          *ngIf="detalheSelecionado"
          [detalhe]="detalheSelecionado"
          (fechar)="fecharDetalhe()"
        ></app-detalhe-modal>
      </section>
    </div>
  </div>
</section>
<!-- Coment√°rios adicionados para facilitar manuten√ß√£o e acessibilidade -->
